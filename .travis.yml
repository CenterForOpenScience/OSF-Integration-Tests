language: python
python:
  - '3.6'
sudo: false
env:
  global:
    - PROJECT_DIR="$PWD"
    - secure: fQW1jFubo1tHA35p9qgleFGNmUnVlBuMvlxHa6N2l2t98Skl7rF6YzmaQF6/kQ2Ut59Zk0GY6d+DipnuQ77Z6JbYdcx5DupDNJDp3rSdf2mZy+o6CF5+khn0TW7fMqlozHhmfW7samUHBoWDyXTbE32B268WHcLDmV9aRYBHyRFRnilXxyf2bKS5eCMuzka4TOhJKsxD5AZDQW5BJMRrVE68Po37WOEElfxknrBcgFKodVDCjKzcPg4u/jskE9rkYrBIXaVPFQZagVR7lYHIyTbyhFRHO/cu3SdQfrJL15d0MGXohZgK/DaPnmmqBnWZBAG/aMf62vPysJaKOgcSje5SB8X4mzq804QHcpx/WyQ6+y/VD4JSXso2M6ENo1dGfyfP5igFoh4paiXuegZtYO3nmYn9UPwVXQ4ZdlE0jYjuoEU6h2obZTCDItadLBxkarNG1V3zxyrMiJG7FANE13Nhnd7N6J+DYjVj22aaTv84ZLzsvYLQELMZbUqhLstZ9IvZqtglgTnXGRWFgT7g45Q++OfGYUiDHsV30b1KcvUQSHGJvC6Y5zBk23bczlqf4IY4UNeHMlj0at5FUOw63A+g3IW+gBIb7ns50L82/xrYUWmbca05XAVzZg8QqwR1/ttbgzw4/QqlEm04tmYwxa4OVSCzE4SV6EEwrbfnqrg=
    - secure: NYaCZen+hMh/9cZY1oq+8SyXaMB6P18PxEl95hThDvlDBFipok2rL8dQj0+zJPvXsZy+ywxq/1m1B948QUa6ZPEwhBeBpapMfqjkdBGt7FccXBjaQpRg7lCn7GeGcVQNtP48yox2hI2J173/6BcWiDnSPzbqwpRUHfUQ+TGkRHTRngKjUd6W17sEKvz0Q9MAzPgpQ9XNo7SQhNYz8AWxcELx7WPWsiEAplmc4RLqZulvzrhzVC3jIB5Ges2l7E26kv8qpeDXI6JUtUEOr8V28bHUPu458p1nS+cHVS7ndN6ReYPR9Aul8jCLH1WllRNT3dUq1AWqAxHs2CzhsBzLY0+k59uefTFpYTpxGaLAkzFngMQJwch5DLjfQ9rn+l/5812rxDJD5CVekza2zEipDTQnfhMJolmQlG8BvaxQJOF69n5inHZVaXdEHfbbYlbNzzheSqs6FS7Iqfanw+pmpGRHj8XApuPeAcfxTUc+KrG9u1VXEI+66mKcYuGQaMwiW4265bEJbOiL4UfdESEXxGfvGG2+l3zcTtO0Kb54MM/Lfk1Km5f/gO4JwafiW/dFAlO6RsQKyph5l5Vpi49qQvCZuNkixC/0pcvIHsKP8X4tfNFcadu1Src5Z7Q8q/8TdQRNUOGnqr58H+BDzbqbxh8tnjx2zn9GVkaM8jL+SVQ=
    - secure: HDz9IAoIp8RPObM9TbqqcYCJ9crlyG5ZiewDG/4VzgB/JKNda+qewxMet2917fjGIeVjFDHBctVeuKBgLoINQCu/tsxzvd3Rsai1IZdwy4+EngSMSjVgqbLg3SYdBvl/A64xkL2EDX6Zhz8WdWuntGg7ikvcR8PCzkZhelfLoDtxZkerKrvPaKD1OdmYMpdnqUtuF0z16fRuzgjeVAHbRHngUHMnVWFP4pCMHvXorms2jYw18u6SMelVggdHH85ugV5NMLVQwYqdVmtrSlHXOHUiBrX5+YWYhZPKfoqDLgXnEeCqTlDTYdoHvwdEXshAM8Afxtr6a+1UEjP83s57TaSImbiHcC4S+fey4ruzdiv2zwGDeiYSn2xpmFoJLPMgio56h9hLUTXimKJVDvRRb9nAGGMoA6kLEeQHLoYSn02dIZ3jbEkDuw2JuCo1dqxIVZxeaX/i+Vj0XoiUs9VGF+L1NKjBGZDQFUycZYCgV6UQCEM5zuuzRN5A1wYxZaik412CXHs3DH3lQXTLQTaL0bu1+NGobceHKxysXzYhYgeMDahljBgWLhEy4vRh5UPG86ar6Fad32e2CzZtHm70yGNr+U28dinfnF1g8y9DF/WIGExKTHhGr5ZFoBB6T3t/74ttnJLBb/iQPkkZi9uW/xZA1MDrioP+k1NC27joEy0=
    - secure: bFPvTRWwxzAn7+gTL/P0vN4FdZtosm2YXyvQ3PaRDjSiBAvxN5YULjP/BsMcX2GNlC0C4KPEWW41RtnZJj3sZvLiCHEG1yPHjY/2K2TyWyzsbxR0zXXhaP6+WyJEHkVYTiKExkZZRcXE/IDg5HNdkIotuST7FA2ewAE57E4m2UWxtTMgdHBcjcJy61VzvUmobHjJSZyUFjjiXjAVesScwatAVTwEJFh1xEB+vGN6XPW0gCHxY+ZHoRUn7T3d4dmBBhqbV0daqUdbKWY4AZWpEas1JeBDMoXsaVUcv2zuCy/SIs6fcOaGMtPwdjMNKzxeBhb4UbXCSqihEGwRvMRwIUWKgprPIJ7sNpcTiXtvKaixj52o5/qslAw4WfgodY1TWqPWW/Cc9akqA/2y5LnFELwUMjDv8G6/aNG4/spOGv3TWt03JcBVwGqtYQXHm1pzcKraRZZMhCnAEjTzGcDZunqmN9l7kQPxyS0D8Rpknnuh1V0zt3ueKUUNTr2+w2bRodByEvlGjD0QrNPw2LRi7fAOzDbtokIpASWJuPyBXTCXSiN6mxh5Yfpn+G184Z5+eu5OlfAu+gxaR4skrg6DejwqzwqOQmABMOp1+cojgMlPV2OBhZ3Py9Y6nJ7/jASOMYrHUhGmb5O7TXttrBc7ta4c3sxj1bQjSKw2V5Fag8M=
    - secure: NQe1xCYxosLQIvTGvGdTng3ODVCE8TZGvnfIDbb2d4yf1eZUAMpg31FGV0fBqrXauiSLuIOyK1VKevKqipV5zKiLM7OSrEIZJ144PBDphNliZK3ReHR0NZAX0nhmwZDNDaXHyBZG4YrhjhkZF3eBT4nC7rjmPnJIjc83M+p2WVy8yyuxqsc9DfWo4Kk7gXjs42TOkGxW+vo+6niEfpeXIib4t9ulpBvU0LX+zvxGamNKXdefUgeoB0qIKKmctgYg1xurrwhOYldAwNTo+4o0gsfgTyWQxUmnqQ7e36TzbALeecDLoKUbogeWMhfparmO4lVngSQsRuKy216SbsUlN0Zoehsdze7KtZUrwwJkGuJcdCJi93vbvh0u2akUEhDg1EpYUswRhD2Hcejih+y5aYiZXYU5fe4LHBozcZpjUSjZl/bUZ9FllRj+Kp+hxT2e5RLPhl/OJugCieCRt+WJzhLqV4sw6JEd+gL/k0PHL65agwNdvdSPxRfCetenkzURBa57KjOAAJwptcUwmlK5cUXTwixtxuXHQLN1SWFYaOaxRpFM5cLohu2OcIceIV0anu/s5mQ3QUeUbbyOs+qyqb0YHVVw4CNyPvoGhrOHpup/9NnIaeudKjl6cDBvkecuY3GkZXk9MFSVr8q5sI2Ktd7u2ca7WyQxt46glzXTWuI=
    - secure: PG7akIEbFwjn6KY2mAo8ZdyFMgO5Z24sTtLl2JPv+h4rEtcauRIlR1IIRIR14ihKn/bXUwA55LeYi24oZco81GIblIzMrIQ9uw9sxGNacmuW39v92/zV7Nzq1hgJg9DPjvsVwufn6KIGFQM82PBenHgaYXym2ZuSI8XLi27wc6NPOKgmFGBDpmVs1/F0uOUffJDXaOmdBStgPcw3sv0812rnCZNPn+WEYZrqf6pZPgLkhzWlCszhvzvdrvukg5Ijj3koD6uyxfK3LkdlYKQSI99SoHCZWnJPBZNfR32ZNwtV4ws90XFaw2O2RhpexRFTYgsLwGK4O65qb28slfFQAc3trrMw+6qS6Fqn00ns9GJqmyIfCJHdNKl7mtJnEuFa9UH3xXwsiL6BSp0RZBrHh+G5uVxT2PyuwxveVbqnj7X2bRNJu6RXa87eawuJa78CNh8xisB2aqbxyE9t5TFq5UW9EDxGM4LdDrI/jmfuN9WxU5QG4Q2ihUbgSLJHIAKL3a7FGfNBUpRAx0I0D2+M7K2tvVfzUsuUx0zJRzNa5Mgb6pAmX5tHHIxwTWUz1+AaQhNRgHKpCrZ6qBCjU6M9Ua1E6xSssO5FMJj3x/xYUtpe8o7wrWFam6InWlGwR+DXYxClqJ/xypIEw61wXiIH9XE1V90QOei+7BMDXU+A71o=
  matrix:
    - TEST_BUILD="msie"
    - TEST_BUILD="safari"
    - TEST_BUILD="edge"
    - TEST_BUILD="firefox"
    - TEST_BUILD="chrome"

matrix:
  fast_finish: true
  allow_failures:
    - env: TEST_BUILD="safari"


install:
  - cd $PROJECT_DIR
  - cp settings/local-travis.py settings/local.py
  - travis_retry pip install --upgrade pip
  - travis_retry pip install invoke==0.13.0
  - travis_retry invoke requirements

script:
  - invoke test_travis_$TEST_BUILD
