language: python
python:
  - '3.6'
sudo: false
env:
  global:
    - PROJECT_DIR="$PWD"
    - secure: vfWE0GChi3F6NMfptwp06asTOTm4OmcgMHfhCKXidRb+qKYPUJlAVexjlgtm3NczogJjpJ82bRvQoxp+zWB9aa/ngH9H7PTEaYGQLcjpwp+sgnLsE3vI2taSB8XiGBwCAtniL4oMzY78O3Cmj8Cmj1r1brI4b8l5NFaxFJPbp4og1+6vuEZa0NgXdvz+x7pPbPx053RJu1ZeMBr/fL9l6l/uO1o4T2W0hgIT9PDH1v8idsYxjFPaib9epL2z/KBPRbTe4GJblEySkof9AA4B+vBeTCJlIyiJ0jxCjsEkFVAoSIEVdoqUE5uSIsy5LbPDaBy8XJaNGc1RIaBNmm2Izj1O+JzJJyObCF1z7njT+4TZVpOEJY6uYWb7pMT283LPYupYcwEvkUlpMOQU17TWeoE5/yxSrBJTebWhfn4yDpR/Ro97d1Fgb/3uV0XW1iVg3YC0wkvT2jf5vw+pB6+ap4VfWmLNfiOoH2EVwbfEH2e2JmmGAAGd0rlJQbqu2yB4DMcQsvUqTiwuHm7sdi2caYwfqa5kDsNCyqhGXvaXzbihs+XW2gwxCUSPuDnONGiVB1fj4IWml1Fdi3LfGMXKnLBjlkjCVu7vkTQATEsNbhUQr6sTQLhtG5F0ohT0bXr3pmKnjIfLNELqc/OKhY9NSthHBDKLKw2r46rVMGcoyBQ=
    - secure: OY1CyuPRjR8KoSWU/pLAjT37AR0vgXnDFbGDXGHeprf57dpn9fGFxXVwi6DKSu4SvPkRmmx49dr71cdAB1ulkvMUrel0bB5rv3T+9km20M0z/Dhk8YXPH6r0slios9n6Dfy3jOYhrkAWUYCySbuot/cePW4BpRxBHtBT2Ke4mOyl6WAe4RlWr0Pt/ZDszSPBGKCZ6/MYTIcgUgsAeRq5bSuebT5MSXOAeazSy5fljXK0AbnQ4OhlQGgSJjyeTFTiZVTVB1eVcRTihAHp1favzb4mhLFONll9aClt5HIdhjneFJ0Ajl+7+6zYtmsW9cDe4TKPD9zLEj8KlOFn6pSdB1UfGLjAAPSkD2YdHbXGbKxHAF1gx8jocI4g5wT/ZMQsaTBW89DU05lwwuby1jbK0lNzH4MzhqucFzZQzjUKqm+0KVuUQptd54H4GDXpniWAXit9CJFrXRTpg1gU1JO95AMw7ls//93Bxs5fWdwTi/zVupX835c76/LCCgAbNsWFUXZgfKESiPolMlIhFuXYpOS7j8TVm4Ygr7qM3W29bpMW5JrAy7GRk2wedwTlquq4dD3EFWEToINN36/4Y2gjSZwY0M5wLXVZcVy3AmcP7HsSQDNuR3hod0GsbPVPJniLxEuPHO93HLjlha/LZjA5SuOvcYqUvMGrEwh4x0hRh9w=
    - secure: fjgBIy7NyaW2wkgptsUzZ0mlhFYwqeuU0IF1o8gq/8hxAH09YJIel89poRgQTvSw/wLwu8kabvmO+QWERTG1qzq2SMkgNsYG4G6kOWExHS+u9xJ3F/l29Ou8ycoJo2+1vvsKyvD/DtjTQcrLkVdn/l0Ez741kYci0V2peS72kcZOKaIOUIyACaxKJFSpLEn9BCqt5G7pq2SWhiwldZD49QxUswta6HDJMqNJHTHHqEq/OlAudqzAupnUa1iLXK/EgXdMGHrDHXAPt1IvDizWc43TB2QriLApKV7ewgmKmSShNhYRqJJmHIi1g96eW8vAv3vhgbGszp5IZjEpuSXmKHIVjmfaoIRheoF+i7YliqjjYsPPGVyYAVnSri8Q4iuLyk6/KAN3lZaey20SRSK+ANpaEURJnFp5tRXAZpZ8XOwlcmMk9pX7tt8OSnwFZVw2U3uXu7Rq0UvQ0xYSHPjzev6AJb1hcJ5nG8SiMkyxzjJU4qeGI2SmC3nPPDEuR9KhMHgvkVjzzJ4rKheGTE2j5Q/t6gkTlBfDAOOzkswGNnzSfv1qj3FWMiTxBcB1erQAU3mpJ+xEMKDbR0WsRyRaTzCQnjvcnvQr1qtod2/ZBpID4s1rPqGrFnb0UV2NlRZtt3a1NCc5TgrvVnGEOdvhY+1QEbuy8j15fk8Z+GHuaVw=
    - secure: kUtIMgtYWVOvCKxZHE2mWvGH6PqRTXbYqvcX03/HZkYgHBZGWlMDRGZtYwm8kwZ/xi/cXz8ljnyTUkSPFi2BgpMrOMWkJhbFgm5u8CnLUe3opB+bM871ekVHwSXCKe0Gk27jGg0RPy4PdeJaKco+UNycyc5hSLvY8+KDLoOrRdh4WY6e5JxhuwJoOEYrJiDh9Q4pfN/A6N4sKkoj/6n7f8U4SDj76d8Mgp25Cpa51PAYrir5/NcHrtbNzx1y81syN286ZvkOl7Pz49jKBH6rq6+oiFUWoMv9HyDwwEBfUmVKIdcgR8zKmilq4egRzEVUkyKtTqK6URhUvUaYGuXBNi8YteqDfJFaOU46oIIp/N3UH50MEQHwwbJcY6m9LOptytuIPfyrp3RbSGV99NgaJFXQRYSCizSJiaZOSAJ/fBpIPi09lPxjt8MFKqG2OSITtd7a4gbw7ziQOEnl+NJ3uw//MIDn+9pmHC06pf2ikC5pXd5iB+hHF1yczIxqTpo5fGoL0hvRVJ8g6AxDYi8KbS7tJRwpYs9dRz5Gv0mh6X+bWnteezniuXPyxEc4MgE1ZLmlSsNI6W+IxEIH3RWUIeKm5rlcuZtcVbhNvbsx4wTiRCghNE6rW1PWC1NS0rBmPtMo9HMaeY7Fb8e/GK+6Lh0V7yGWQAP0o7tRwvkZrCk=
    - secure: sJ+uAoo5SUW7ko/xO7pCd0fO6sCy+fhmIxeQfppJ8qLADVXcG+zJg6qSOKJVsgiB09GJ3fkqFzj1Rn4wcTBRCVDfCIEjSXT8cDHky3tKarUuyxtyNHRT7jeTcFn+xJ/Z1X0IaSyb7LycJo4z1brVV2GNCnoxfc/DyZCXPxZNICo76GLZ5enL+rJ85fsUQgCOxaVM/gXQVSAWA+xa+y+b6S6jIlpyJNFUJ+eGGntqr5MRtipWhmt9MS07eWOvK+94PkAJWpQvDhD6OQG1L3djHixeC5DQcXYAaxtBGKgScFAOimyWjYHgDAARbn9bYFI320IxhPcI3K2Qji8FF9X1lJi1BDCBM9EmYa0Ewq7NQx6CgakD2MPOCWUCqfyB1EZHjCAHDAoppm4hxkNTzxCGsnX18guS1CqqNPH9tjpewNLIh0XlldmloobeOMj5hkxT5RwU6wNWPrSB7rN+r2lSTSDN9nQicVWk1YHZBo2VzugySUJe1gSIDXGACKTdP142EZItBhsxEwekUeT8MxDFpLKHsqnGfzveXazrColjlzRi9CSlozck/z/ZXS2//ygnwfjeWySve+EDXFsf2xr9TbycyBjnXHah+kSVTTfNaxSorT/3f8kp9y6CI+MJkrPLGxb7Msf/fvDqBDMSrqChTMoCG4YXTVjYNX53R90zymc=
    - secure: wiFFkSlnwLMDUYOPlVlKqQMnvDuIM2m6ZMCKhIuJiS8ItdcvShu7z2h98XSYy7zSrb75XSBFU9qX/I25LMkynZMi+miPWVf2izRVVST2BlwX/ikzw73oFkoJ4cvrfqih17A8IVtl2P9zCASzx96kIG+kHJ4LxsWfSV9zxxxNi57UbMeTUr18tMJu0nhYfg9HH4s+OVzAknpb64pYauKKsb6PsniW8qPLQ/c1ky8xhyYPNqSL1gtYrqzWu7suQOh6MRs1lljScr2lQdUEEu/HS4aUvwvOyvsexZCZTxaDb375iva40N/E1bGNmW9qf/btM8VQWmkGPZpNNoO6N9FUApyYoVI453DTiFpZg8c1tMp0PnPnhPZJBAo6awg88VYPEGSusSpDGRNdetjVFHJkSc0cSCvcSm81x9IedfIzErOMVzC3C9sUBDyRyLSlEgxwh4VnsRYCsKqISn/z5rrAZtxtipC7bUZlzB3KNYcRVK2NVmtosf+LpYc9+sRHmNH2U3JJk3nHC+aPtVF9uYiZus2ry8UyG8qYyAm0C+p0YDD4q2KVexgC0tSnhjl7EL2cXXDjT4CPBMUe4V7M3STEVJ85RtghTnQrnd5ZSCdK6TQ8RtnRCfT+JbDcfMk5W5zUNIGjQ0QkQ/3dxMSM6vJrDIchCdvzhvjU/k3B8hnEwqk=

  matrix:
    - TEST_BUILD="msie"
    - TEST_BUILD="safari"
    - TEST_BUILD="edge"
    - TEST_BUILD="firefox"
    - TEST_BUILD="chrome"
    # - TEST_BUILD="ios"
    # - TEST_BUILD="android"

install:
  - cd $PROJECT_DIR
  - cp settings/local-travis.py settings/local.py
  - travis_retry pip install --upgrade pip
  - travis_retry pip install invoke==0.13.0
  - travis_retry invoke requirements

script:
  - invoke test_travis_$TEST_BUILD -n 4
